# Lifer 产品需求文档 (PRD)

## 产品概述

**Lifer** 是一款 iOS 正计时应用，专注于习惯养成和生活方式管理。通过正向计时和成就系统，为用户提供完成任务的成就感（内啡肽激励）。

### 核心理念
- **正向激励**: 通过完成计时任务获得成就感，而非传统的倒计时压力
- **习惯养成**: 帮助用户建立和坚持良好的生活习惯
- **极简设计**: 无需登录，纯本地存储，保护用户隐私
- **成就感**: 成就系统提供正向反馈循环

---

## 目标用户

- **主要用户**: 18-35岁，关注自我提升和习惯养成的用户
- **使用场景**: 学习、工作、运动、冥想、阅读等需要专注的活动
- **用户痛点**:
  - 缺乏持续的动力和反馈
  - 难以坚持好习惯
  - 需要可视化的进步记录

---

## 功能需求

### 1. 核心功能 (MVP)

#### 1.1 计时器
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 开始计时 | 点击大按钮开始计时 | P0 |
| 暂停/恢复 | 计时过程中可暂停和恢复 | P0 |
| 停止计时 | 长按3秒停止计时（防误触） | P0 |
| 活动名称 | 计时前输入活动名称 | P0 |
| 最近活动 | 快速选择最近使用的活动 | P0 |
| 类别选择 | 为活动选择预设类别或自定义 | P1 |
| 后台计时 | 应用切换到后台后继续计时 | P0 |

#### 1.2 历史记录
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 日期查看 | 按日期查看历史记录 | P0 |
| 记录列表 | 显示活动名称、时长、开始时间 | P0 |
| 删除记录 | 滑动删除单条记录 | P0 |
| 记录详情 | 点击查看详细信息 | P2 |

#### 1.3 统计分析
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 时间范围 | 日/周/月/年切换 | P0 |
| 总时长 | 显示选中范围的总时长 | P0 |
| 饼图 | 活动分布占比 | P0 |
| 柱状图 | 时间趋势变化 | P0 |
| 类别筛选 | 按类别筛选统计 | P1 |

#### 1.4 成就系统
| 成就 | 解锁条件 | 优先级 |
|------|----------|--------|
| 初次体验 | 完成第一次计时 | P0 |
| 坚持不懈 | 累计10小时 | P0 |
| 时间管理大师 | 累计100小时 | P0 |
| 多面手 | 5种不同活动 | P0 |
| 持之以恒 | 连续7天 | P0 |

#### 1.5 设置
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 深色模式 | 切换日间/夜间主题 | P0 |
| 通知 | 计时提醒、成就解锁提醒 | P1 |
| 声音 | 提示音开关 | P1 |
| 数据管理 | 清除所有数据 | P0 |

---

### 2. 增强功能

#### 2.1 灵动岛 (Dynamic Island)
| 功能 | 描述 | 优先级 |
|------|------|--------|
| 实时显示 | 显示当前计时状态 | P1 |
| 轻松操作 | 点击暂停/恢复 | P1 |
| 锁屏小组件 | 锁屏状态下显示计时 | P2 |

#### 2.2 类别系统
| 预设类别 | 图标 | 颜色 |
|----------|------|------|
| 运动 | figure.run | 绿色 |
| 阅读 | book.fill | 橙色 |
| 工作 | briefcase.fill | 蓝色 |
| 学习 | graduationcap.fill | 紫色 |
| 冥想 | sparkles | 青色 |
| 健身 | figure.strengthtraining.trainer | 红色 |
| 写作 | pencil | 黄色 |
| 编程 | keyboard | 灰色 |
| 音乐 | music.note | 粉色 |
| 自定义 | - | 用户选择 |

---

## 非功能需求

### 性能要求
- 应用启动时间 < 500ms
- TimerView 渲染 < 100ms
- 统计计算 (1000条记录) < 200ms
- 60 FPS 流畅运行

### 兼容性要求
- iOS 17.0+
- iPhone 14 Pro+ 支持灵动岛
- 适配深色模式

### 安全性要求
- 纯本地存储，无需网络
- 无用户数据收集
- 支持数据导出（未来）

---

## 用户故事

### 核心用户旅程

**故事1: 开始学习计时**
> 作为一名学生，我想开始学习时计时，以便跟踪我的学习时间。

**故事2: 查看今日统计**
> 作为一名工作者，我想查看今天我工作了多少小时，以便了解我的时间分配。

**故事3: 解锁成就**
> 作为一名习惯养成者，当我累计达到10小时时，我想获得成就徽章，以便感到有成就感。

---

## UI/UX 设计原则

1. **极简至上**: 减少操作步骤，核心功能一键直达
2. **视觉反馈**: 所有操作都有即时视觉反馈
3. **一致性**: 使用统一的颜色、图标和交互模式
4. **中文优先**: 界面语言为简体中文

---

## 数据模型

### TimerRecord (计时记录)
```swift
- id: UUID
- activityName: String
- category: String (新增)
- startTime: Date
- endTime: Date?
- totalDuration: TimeInterval
- pauseIntervals: [PauseInterval]?
- isActive: Bool
```

### Activity (活动)
```swift
- id: UUID
- name: String
- category: String (新增)
- color: String
- icon: String?
- records: [TimerRecord]?
```

### UserAchievement (用户成就)
```swift
- id: UUID
- title: String
- achievementDescription: String
- iconName: String
- isUnlocked: Bool
- unlockDate: Date?
- progress: Double
```

---

## 技术栈

- **框架**: SwiftUI
- **数据持久化**: SwiftData
- **图表**: Swift Charts
- **灵动岛**: ActivityKit
- **最低版本**: iOS 17.0

---

## 版本规划

### v1.0 (当前)
- 基础计时功能
- 历史记录
- 统计图表
- 成就系统
- 设置

### v1.1 (计划中)
- 灵动岛支持
- 类别系统
- 性能优化
- 深色模式修复

### v1.2 (未来)
- Widget 支持
- 数据导出
- 自定义成就
- iCloud 同步

---

## 成功指标

### 功能完成度
- 所有 P0 功能 100% 完成
- 所有 P1 功能 80% 完成

### 性能指标
- 应用无卡顿
- 内存占用 < 100MB
- 电池消耗正常

### 用户体验
- 用户留存率 > 60%
- 日均使用次数 > 3次
- 平均每次使用时长 > 20分钟
